#include "stdafx.h"
namespace  Lexer
{

	FST::FST typeInteger("", 8,
		FST::NODE(1, FST::RELATION('i', 1)),
		FST::NODE(1, FST::RELATION('n', 2)),
		FST::NODE(1, FST::RELATION('t', 3)),
		FST::NODE(1, FST::RELATION('e', 4)),
		FST::NODE(1, FST::RELATION('g', 5)),
		FST::NODE(1, FST::RELATION('e', 6)),
		FST::NODE(1, FST::RELATION('r', 7)),
		FST::NODE()
	);

	FST::FST typeString("", 7,
		FST::NODE(1, FST::RELATION('s', 1)),
		FST::NODE(1, FST::RELATION('t', 2)),
		FST::NODE(1, FST::RELATION('r', 3)),
		FST::NODE(1, FST::RELATION('i', 4)),
		FST::NODE(1, FST::RELATION('n', 5)),
		FST::NODE(1, FST::RELATION('g', 6)),
		FST::NODE()
	);

	FST::FST typeFunction("", 9,
		FST::NODE(1, FST::RELATION('f', 1)),
		FST::NODE(1, FST::RELATION('u', 2)),
		FST::NODE(1, FST::RELATION('n', 3)),
		FST::NODE(1, FST::RELATION('c', 4)),
		FST::NODE(1, FST::RELATION('t', 5)),
		FST::NODE(1, FST::RELATION('i', 6)),
		FST::NODE(1, FST::RELATION('o', 7)),
		FST::NODE(1, FST::RELATION('n', 8)),
		FST::NODE()
	);
	
	FST::FST typeDeclare("", 8,
		FST::NODE(1, FST::RELATION('d', 1)),
		FST::NODE(1, FST::RELATION('e', 2)),
		FST::NODE(1, FST::RELATION('c', 3)),
		FST::NODE(1, FST::RELATION('l', 4)),
		FST::NODE(1, FST::RELATION('a', 5)),
		FST::NODE(1, FST::RELATION('r', 6)),
		FST::NODE(1, FST::RELATION('e', 7)),
		FST::NODE()
	);

	FST::FST typeReturn("", 7,
		FST::NODE(1, FST::RELATION('r', 1)),
		FST::NODE(1, FST::RELATION('e', 2)),
		FST::NODE(1, FST::RELATION('t', 3)),
		FST::NODE(1, FST::RELATION('u', 4)),
		FST::NODE(1, FST::RELATION('r', 5)),
		FST::NODE(1, FST::RELATION('n', 6)),
		FST::NODE()
	);

	FST::FST typeMain("", 5,
		FST::NODE(1, FST::RELATION('m', 1)),
		FST::NODE(1, FST::RELATION('a', 2)),
		FST::NODE(1, FST::RELATION('i', 3)),
		FST::NODE(1, FST::RELATION('n', 4)),
		FST::NODE()
	);

	FST::FST typePrint("", 6,
		FST::NODE(1, FST::RELATION('p', 1)),
		FST::NODE(1, FST::RELATION('r', 2)),
		FST::NODE(1, FST::RELATION('i', 3)),
		FST::NODE(1, FST::RELATION('n', 4)),
		FST::NODE(1, FST::RELATION('t', 5)),
		FST::NODE()
	);

	FST::FST typeSpace("", 2,
		FST::NODE(1, FST::RELATION(' ', 1)),
		FST::NODE()
	);
	FST::FST typeLeftBrace("", 2,
		FST::NODE(1, FST::RELATION('{', 1)),
		FST::NODE()
	);
	FST::FST typeRightBrace("", 2,
		FST::NODE(1, FST::RELATION('}', 1)),
		FST::NODE()
	);
	FST::FST typeLeftThesis("", 2,
		FST::NODE(1, FST::RELATION('(', 1)),
		FST::NODE()
	);
	FST::FST typeRightThesis("", 2,
		FST::NODE(1, FST::RELATION(')', 1)),
		FST::NODE()
	);
	FST::FST typeSemicolon("", 2,
		FST::NODE(1, FST::RELATION(';', 1)),
		FST::NODE()
	);
	FST::FST typeComma("", 2,
		FST::NODE(1, FST::RELATION(',', 1)),
		FST::NODE()
	);
	FST::FST typePlus("", 2,
		FST::NODE(1, FST::RELATION('+', 1)),
		FST::NODE());
	FST::FST typeMinus("", 2,
		FST::NODE(1, FST::RELATION('-', 1)),
		FST::NODE());
	FST::FST typeDel("", 2,
		FST::NODE(1, FST::RELATION('/', 1)),
		FST::NODE());
	FST::FST typeMulti("", 2,
		FST::NODE(1, FST::RELATION('*', 1)),
		FST::NODE());
	FST::FST typeEquals("", 2,
		FST::NODE(1, FST::RELATION('=', 1)),
		FST::NODE());

	FST::FST typeIdentificator("", 2,
		FST::NODE(52,
			FST::RELATION('a', 0), FST::RELATION('b', 0),
			FST::RELATION('c', 0), FST::RELATION('d', 0),
			FST::RELATION('e', 0), FST::RELATION('f', 0),
			FST::RELATION('g', 0), FST::RELATION('h', 0),
			FST::RELATION('i', 0), FST::RELATION('j', 0),
			FST::RELATION('k', 0), FST::RELATION('l', 0),
			FST::RELATION('m', 0), FST::RELATION('n', 0),
			FST::RELATION('o', 0), FST::RELATION('p', 0),
			FST::RELATION('q', 0), FST::RELATION('r', 0),
			FST::RELATION('s', 0), FST::RELATION('t', 0),
			FST::RELATION('u', 0), FST::RELATION('v', 0),
			FST::RELATION('w', 0), FST::RELATION('x', 0),
			FST::RELATION('y', 0), FST::RELATION('z', 0),
			FST::RELATION('a', 1), FST::RELATION('b', 1),
			FST::RELATION('c', 1), FST::RELATION('d', 1),
			FST::RELATION('e', 1), FST::RELATION('f', 1),
			FST::RELATION('g', 1), FST::RELATION('h', 1),
			FST::RELATION('i', 1), FST::RELATION('j', 1),
			FST::RELATION('k', 1), FST::RELATION('l', 1),
			FST::RELATION('m', 1), FST::RELATION('n', 1),
			FST::RELATION('o', 1), FST::RELATION('p', 1),
			FST::RELATION('q', 1), FST::RELATION('r', 1),
			FST::RELATION('s', 1), FST::RELATION('t', 1),
			FST::RELATION('u', 1), FST::RELATION('v', 1),
			FST::RELATION('w', 1), FST::RELATION('x', 1),
			FST::RELATION('y', 1), FST::RELATION('z', 1)
		),

		FST::NODE()
	);


	FST::FST typeStringLiteral("", 4,

		FST::NODE(1,
			FST::RELATION('\'', 1)),
		FST::NODE(384,
			FST::RELATION('!', 2), FST::RELATION('@', 2), FST::RELATION('#', 2), FST::RELATION('$', 2), FST::RELATION('%', 2), FST::RELATION('^', 2),
			FST::RELATION('&', 2), FST::RELATION('*', 2), FST::RELATION('(', 2), FST::RELATION(')', 2), FST::RELATION('-', 2), FST::RELATION('_', 2),
			FST::RELATION('+', 2), FST::RELATION('=', 2), FST::RELATION('~', 2), FST::RELATION('`', 2), FST::RELATION('1', 2), FST::RELATION('2', 2),
			FST::RELATION('3', 2), FST::RELATION('4', 2), FST::RELATION('5', 2), FST::RELATION('6', 2), FST::RELATION('7', 2), FST::RELATION('8', 2),
			FST::RELATION('9', 2), FST::RELATION('0', 2), FST::RELATION('	', 2), FST::RELATION(' ', 2), FST::RELATION('q', 2), FST::RELATION('w', 2),
			FST::RELATION('e', 2), FST::RELATION('r', 2), FST::RELATION('t', 2), FST::RELATION('y', 2), FST::RELATION('u', 2), FST::RELATION('i', 2),
			FST::RELATION('o', 2), FST::RELATION('p', 2), FST::RELATION('{', 2), FST::RELATION('[', 2), FST::RELATION('}', 2), FST::RELATION(']', 2),
			FST::RELATION('\\', 2), FST::RELATION('|', 2), FST::RELATION('Q', 2), FST::RELATION('W', 2), FST::RELATION('R', 2), FST::RELATION('T', 2), FST::RELATION('Y', 2),
			FST::RELATION('U', 2), FST::RELATION('I', 2), FST::RELATION('O', 2), FST::RELATION('P', 2), FST::RELATION('a', 2), FST::RELATION('s', 2),
			FST::RELATION('d', 2), FST::RELATION('f', 2), FST::RELATION('g', 2), FST::RELATION('h', 2), FST::RELATION('j', 2), FST::RELATION('k', 2),
			FST::RELATION('l', 2), FST::RELATION(':', 2), FST::RELATION(';', 2), FST::RELATION('\'', 2), FST::RELATION('"', 2), FST::RELATION('A', 2),
			FST::RELATION('S', 2), FST::RELATION('D', 2), FST::RELATION('F', 2), FST::RELATION('G', 2), FST::RELATION('H', 2), FST::RELATION('J', 2),
			FST::RELATION('K', 2), FST::RELATION('L', 2), FST::RELATION('z', 2), FST::RELATION('x', 2), FST::RELATION('c', 2), FST::RELATION('v', 2),
			FST::RELATION('b', 2), FST::RELATION('n', 2), FST::RELATION('m', 2), FST::RELATION(',', 2), FST::RELATION('.', 2), FST::RELATION('/', 2),
			FST::RELATION('Z', 2), FST::RELATION('X', 2), FST::RELATION('C', 2), FST::RELATION('V', 2), FST::RELATION('B', 2), FST::RELATION('N', 2),
			FST::RELATION('M', 2), FST::RELATION('<', 2), FST::RELATION('>', 2), FST::RELATION('?', 2), FST::RELATION('¸', 2), FST::RELATION('¨', 2),
			FST::RELATION('é', 2), FST::RELATION('ö', 2), FST::RELATION('ó', 2), FST::RELATION('ê', 2), FST::RELATION('å', 2), FST::RELATION('í', 2),
			FST::RELATION('ã', 2), FST::RELATION('ø', 2), FST::RELATION('ù', 2), FST::RELATION('ç', 2), FST::RELATION('õ', 2), FST::RELATION('ú', 2),
			FST::RELATION('É', 2), FST::RELATION('Ö', 2), FST::RELATION('Ó', 2), FST::RELATION('Ê', 2), FST::RELATION('Å', 2), FST::RELATION('Í', 2),
			FST::RELATION('Ã', 2), FST::RELATION('Ø', 2), FST::RELATION('Ù', 2), FST::RELATION('Ç', 2), FST::RELATION('Õ', 2), FST::RELATION('Ú', 2),
			FST::RELATION('ô', 2), FST::RELATION('û', 2), FST::RELATION('â', 2), FST::RELATION('à', 2), FST::RELATION('ï', 2), FST::RELATION('ð', 2),
			FST::RELATION('î', 2), FST::RELATION('ë', 2), FST::RELATION('ä', 2), FST::RELATION('æ', 2), FST::RELATION('ý', 2), FST::RELATION('Ô', 2),
			FST::RELATION('Û', 2), FST::RELATION('Â', 2), FST::RELATION('À', 2), FST::RELATION('Ï', 2), FST::RELATION('Ð', 2), FST::RELATION('Î', 2),
			FST::RELATION('Ë', 2), FST::RELATION('Ä', 2), FST::RELATION('Æ', 2), FST::RELATION('Ý', 2), FST::RELATION('ÿ', 2), FST::RELATION('÷', 2),
			FST::RELATION('ñ', 2), FST::RELATION('ì', 2), FST::RELATION('è', 2), FST::RELATION('ò', 2), FST::RELATION('ü', 2), FST::RELATION('á', 2),
			FST::RELATION('þ', 2), FST::RELATION('ß', 2), FST::RELATION('×', 2), FST::RELATION('Ñ', 2), FST::RELATION('Ì', 2), FST::RELATION('È', 2),
			FST::RELATION('Ò', 2), FST::RELATION('Ü', 2), FST::RELATION('Á', 2), FST::RELATION('Þ', 2),
			FST::RELATION('!', 1), FST::RELATION('@', 1), FST::RELATION('#', 1), FST::RELATION('$', 1), FST::RELATION('%', 1), FST::RELATION('^', 1),
			FST::RELATION('&', 1), FST::RELATION('*', 1), FST::RELATION('(', 1), FST::RELATION(')', 1), FST::RELATION('-', 1), FST::RELATION('_', 1),
			FST::RELATION('+', 1), FST::RELATION('=', 1), FST::RELATION('~', 1), FST::RELATION('`', 1), FST::RELATION('1', 1), FST::RELATION('2', 1),
			FST::RELATION('3', 1), FST::RELATION('4', 1), FST::RELATION('5', 1), FST::RELATION('6', 1), FST::RELATION('7', 1), FST::RELATION('8', 1),
			FST::RELATION('9', 1), FST::RELATION('0', 1), FST::RELATION('	', 1), FST::RELATION(' ', 1), FST::RELATION('q', 1), FST::RELATION('w', 1),
			FST::RELATION('e', 1), FST::RELATION('r', 1), FST::RELATION('t', 1), FST::RELATION('y', 1), FST::RELATION('u', 1), FST::RELATION('i', 1),
			FST::RELATION('o', 1), FST::RELATION('p', 1), FST::RELATION('{', 1), FST::RELATION('[', 1), FST::RELATION('}', 1), FST::RELATION(']', 1),
			FST::RELATION('\\', 1), FST::RELATION('|', 1), FST::RELATION('Q', 1), FST::RELATION('W', 1), FST::RELATION('R', 1), FST::RELATION('T', 1), FST::RELATION('Y', 1),
			FST::RELATION('U', 1), FST::RELATION('I', 1), FST::RELATION('O', 1), FST::RELATION('P', 1), FST::RELATION('a', 1), FST::RELATION('s', 1),
			FST::RELATION('d', 1), FST::RELATION('f', 1), FST::RELATION('g', 1), FST::RELATION('h', 1), FST::RELATION('j', 1), FST::RELATION('k', 1),
			FST::RELATION('l', 1), FST::RELATION(':', 1), FST::RELATION(';', 1), FST::RELATION('\'', 1), FST::RELATION('"', 1), FST::RELATION('A', 1),
			FST::RELATION('S', 1), FST::RELATION('D', 1), FST::RELATION('F', 1), FST::RELATION('G', 1), FST::RELATION('H', 1), FST::RELATION('J', 1),
			FST::RELATION('K', 1), FST::RELATION('L', 1), FST::RELATION('z', 1), FST::RELATION('x', 1), FST::RELATION('c', 1), FST::RELATION('v', 1),
			FST::RELATION('b', 1), FST::RELATION('n', 1), FST::RELATION('m', 1), FST::RELATION(',', 1), FST::RELATION('.', 1), FST::RELATION('/', 1),
			FST::RELATION('Z', 1), FST::RELATION('X', 1), FST::RELATION('C', 1), FST::RELATION('V', 1), FST::RELATION('B', 1), FST::RELATION('N', 1),
			FST::RELATION('M', 1), FST::RELATION('<', 1), FST::RELATION('>', 1), FST::RELATION('?', 1), FST::RELATION('¸', 1), FST::RELATION('¨', 1),
			FST::RELATION('é', 1), FST::RELATION('ö', 1), FST::RELATION('ó', 1), FST::RELATION('ê', 1), FST::RELATION('å', 1), FST::RELATION('í', 1),
			FST::RELATION('ã', 1), FST::RELATION('ø', 1), FST::RELATION('ù', 1), FST::RELATION('ç', 1), FST::RELATION('õ', 1), FST::RELATION('ú', 1),
			FST::RELATION('É', 1), FST::RELATION('Ö', 1), FST::RELATION('Ó', 1), FST::RELATION('Ê', 1), FST::RELATION('Å', 1), FST::RELATION('Í', 1),
			FST::RELATION('Ã', 1), FST::RELATION('Ø', 1), FST::RELATION('Ù', 1), FST::RELATION('Ç', 1), FST::RELATION('Õ', 1), FST::RELATION('Ú', 1),
			FST::RELATION('ô', 1), FST::RELATION('û', 1), FST::RELATION('â', 1), FST::RELATION('à', 1), FST::RELATION('ï', 1), FST::RELATION('ð', 1),
			FST::RELATION('î', 1), FST::RELATION('ë', 1), FST::RELATION('ä', 1), FST::RELATION('æ', 1), FST::RELATION('ý', 1), FST::RELATION('Ô', 1),
			FST::RELATION('Û', 1), FST::RELATION('Â', 1), FST::RELATION('À', 1), FST::RELATION('Ï', 1), FST::RELATION('Ð', 1), FST::RELATION('Î', 1),
			FST::RELATION('Ë', 1), FST::RELATION('Ä', 1), FST::RELATION('Æ', 1), FST::RELATION('Ý', 1), FST::RELATION('ÿ', 1), FST::RELATION('÷', 1),
			FST::RELATION('ñ', 1), FST::RELATION('ì', 1), FST::RELATION('è', 1), FST::RELATION('ò', 1), FST::RELATION('ü', 1), FST::RELATION('á', 1),
			FST::RELATION('þ', 1), FST::RELATION('ß', 1), FST::RELATION('×', 1), FST::RELATION('Ñ', 1), FST::RELATION('Ì', 1), FST::RELATION('È', 1),
			FST::RELATION('Ò', 1), FST::RELATION('Ü', 1), FST::RELATION('Á', 1), FST::RELATION('Þ', 1)
		),
		FST::NODE(1,
			FST::RELATION('\'', 3)),
		FST::NODE()
	);

	FST::FST typeNumbLiteral("", 3,
		FST::NODE(20,
			FST::RELATION('0', 2), FST::RELATION('1', 2), FST::RELATION('2', 2), FST::RELATION('3', 2), FST::RELATION('4', 2),
			FST::RELATION('5', 2), FST::RELATION('6', 2), FST::RELATION('7', 2), FST::RELATION('8', 2), FST::RELATION('9', 2),
			FST::RELATION('1', 1), FST::RELATION('2', 1), FST::RELATION('3', 1), FST::RELATION('4', 1),
			FST::RELATION('5', 1), FST::RELATION('6', 1), FST::RELATION('7', 1), FST::RELATION('8', 1), FST::RELATION('9', 1)),

		FST::NODE(20,
			FST::RELATION('0', 2), FST::RELATION('1', 2), FST::RELATION('2', 2), FST::RELATION('3', 2), FST::RELATION('4', 2),
			FST::RELATION('5', 2), FST::RELATION('6', 2), FST::RELATION('7', 2), FST::RELATION('8', 2), FST::RELATION('9', 2),
			FST::RELATION('0', 1), FST::RELATION('1', 1), FST::RELATION('2', 1), FST::RELATION('3', 1), FST::RELATION('4', 1),
			FST::RELATION('5', 1), FST::RELATION('6', 1), FST::RELATION('7', 1), FST::RELATION('8', 1), FST::RELATION('9', 1)),

		FST::NODE()

	);

	// Ôóíêöèÿ äëÿ ïðîâåðêè ñòðîêè s ñ èñïîëüçîâàíèåì çàäàííîãî êîíå÷íîãî àâòîìàòà fst
	bool check(std::string s, FST::FST fst)
	{
		// Óñòàíàâëèâàåì ñòðîêó âíóòðè êîíå÷íîãî àâòîìàòà fst
		fst.string = s;

		// Çàïóñêàåì âûïîëíåíèå êîíå÷íîãî àâòîìàòà è âîçâðàùàåì ðåçóëüòàò
		return FST::execute(fst);
	}


	// Îáúÿâëåíèå ôóíêöèè getIdentifierContext, êîòîðàÿ ïðèíèìàåò ëåêñè÷åñêóþ òàáëèöó è òåêóùèé èíäåêñ
	std::string getIdentifierContext(const LT::LexTable& lextable, int currentIndex)
	{
		// Îáúÿâëåíèå ïåðåìåííûõ äëÿ õðàíåíèÿ êîíòåêñòà
		std::string context;
		std::string buffer;
		std::string buff;
		std::string type;

		// Ïðîâåðêà, ïóñò ëè êîíòåêñò
		if (context.empty())
		{
			// Ïåðâûé öèêë: îáðàòíûé ïðîõîä ïî ëåêñè÷åñêîé òàáëèöå îò òåêóùåãî èíäåêñà íàçàä
			for (int i = currentIndex - 1; i >= 0; i--)
			{
				// Ïðîâåðêà, ÷òî òåêóùàÿ ëåêñåìà - ýòî ïåðåìåííàÿ (t) è èìååò òîò æå êîììåíòàðèé, ÷òî è ïðåäûäóùàÿ
				if (lextable.table[i].lexema == 't' && lextable.table[i + 1].comm == lextable.table[currentIndex - 1].comm)
				{
					// Äîáàâëåíèå ñîîòâåòñòâóþùåãî òèïà â êîíòåêñò (integer èëè string)
					if (lextable.table[i].comm == "integer")
					{
						type += "_integer_";
					}
					if (lextable.table[i].comm == "string")
					{
						type += "_string_";
					}

					// Çàâåðøåíèå öèêëà
					break;
				}
			}

			// Âòîðîé öèêë: îáðàòíûé ïðîõîä ïî ëåêñè÷åñêîé òàáëèöå îò òåêóùåãî èíäåêñà íàçàä
			for (int i = currentIndex - 1; i >= 0; i--)
			{
				const LT::Entry& entry = lextable.table[i];
				// Ïðîâåðêà, ÷òî òåêóùàÿ ëåêñåìà - ýòî îáúÿâëåíèå ôóíêöèè (LEX_FUNCTION)
				if (entry.lexema == LEX_FUNCTION)
				{
					// Äîáàâëåíèå "function" â êîíòåêñò
					buffer += "function";

					// Ïðîâåðêà òèïà (integer èëè string) è äîáàâëåíèå ñîîòâåòñòâóþùåãî òèïà â êîíòåêñò
					if (lextable.table[i - 1].comm == "integer")
					{
						type += "_integer_";
					}
					if (lextable.table[i - 1].comm == "string") {
						type += "_string_";
					}

					// Ïîëó÷åíèå èìåíè ôóíêöèè è äîáàâëåíèå åãî â êîíòåêñò
					buff = lextable.table[i + 1].comm;
					buffer += type;
					buffer += buff;

					// Î÷èñòêà âðåìåííûõ ïåðåìåííûõ
					type.clear();
					buff.clear();

					// Çàâåðøåíèå öèêëà
					break;
				}
				// Ïðîâåðêà, ÷òî òåêóùàÿ ëåêñåìà - ýòî îòêðûâàþùàÿ ñêîáêà
				else if (entry.lexema == LEX_LEFTBRACE)
				{
					// Âíóòðåííèé öèêë: îáðàòíûé ïðîõîä îò òåêóùåãî èíäåêñà íàçàä
					for (int j = i; j >= 0; j--)
					{
						if (lextable.table[j].lexema == LEX_FUNCTION)
						{
							// Ïðîâåðêà, ÷òî ôóíêöèÿ ÿâëÿåòñÿ âñòðîåííîé (LIB_FUNCTION1 èëè LIB_FUNCTION2)
							if (lextable.table[j].comm == LIB_FUNCTION1 ||
								lextable.table[j].comm == LIB_FUNCTION2)
							{
								continue;
							}

							// Ïîëó÷åíèå èìåíè ôóíêöèè è äîáàâëåíèå "var_function" â êîíòåêñò
							buff = lextable.table[j + 1].comm;
							buffer += "var_function";

							// Çàâåðøåíèå öèêëà
							break;
						}

						// Ïðîâåðêà, ÷òî òåêóùàÿ ëåêñåìà - ýòî ãëàâíàÿ ôóíêöèÿ (LEX_MAINFUNC)
						if (lextable.table[j].lexema == LEX_MAINFUNC)
						{
							// Äîáàâëåíèå "var_main" â êîíòåêñò
							buffer += "var_main";

							// Çàâåðøåíèå öèêëà
							break;
						}
					}

					// Äîáàâëåíèå òèïà è èìåíè â êîíòåêñò
					buffer += type;
					buffer += buff;

					// Î÷èñòêà âðåìåííûõ ïåðåìåííûõ
					type.clear();
					buff.clear();

					// Çàâåðøåíèå öèêëà
					break;
				}
				// Ïðîâåðêà, ÷òî òåêóùàÿ ëåêñåìà - ýòî îòêðûâàþùàÿ ñêîáêà (LEX_LEFTHESIS)
				else if (entry.lexema == LEX_LEFTHESIS)
				{
					// Ïðîâåðêà íàëè÷èÿ óñëîâèé äëÿ èãíîðèðîâàíèÿ
					if (lextable.table[i - 1].lexema == LEX_RAV || lextable.table[i - 1].lexema == 'v' || lextable.table[i + 1].lexema == 'v')
					{
						// Ïðîïóñê
						;
					}

					// Âíóòðåííèé öèêë: îáðàòíûé ïðîõîä îò òåêóùåãî èíäåêñà íàçàä, ïîêà íå âñòðåòèòñÿ çàêðûâàþùàÿ ñêîáêà
					for (int j = i; j >= 0 && j != LEX_RIGHTBRACE; j--)
					{
						// Ïðîâåðêà, ÷òî áóôåð ïóñò è òåêóùàÿ ëåêñåìà - ýòî èäåíòèôèêàòîð (LEX_ID)
						if (buffer.empty())
						{
							if (lextable.table[j].lexema == LEX_ID && lextable.table[j - 1].lexema == LEX_FUNCTION)
							{
								// Ïîëó÷åíèå èìåíè ïàðàìåòðà è äîáàâëåíèå "parameter_function" â êîíòåêñò
								buff = lextable.table[j + 1].comm;
								buffer += "parameter_function";

								// Çàâåðøåíèå öèêëà
								break;
							}
						}

						// Ïðîâåðêà, ÷òî áóôåð ïóñò è òåêóùàÿ ëåêñåìà - ýòî îòêðûâàþùàÿ ñêîáêà
						if (buffer.empty())
						{
							if (lextable.table[j].lexema == LEX_LEFTBRACE)
							{
								// Âíóòðåííèé öèêë: îáðàòíûé ïðîõîä îò òåêóùåãî èíäåêñà íàçàä
								for (int k = j; k >= 0; k--)
								{
									if (lextable.table[k].lexema == LEX_FUNCTION)
									{
										// Ïðîâåðêà, ÷òî ôóíêöèÿ ÿâëÿåòñÿ âñòðîåííîé (LIB_FUNCTION1 èëè LIB_FUNCTION2)
										if (lextable.table[k].comm == LIB_FUNCTION1 ||
											lextable.table[k].comm == LIB_FUNCTION2)
										{
											continue;
										}

										// Ïîëó÷åíèå èìåíè ôóíêöèè è äîáàâëåíèå "var_function" â êîíòåêñò
										buff = lextable.table[k + 1].comm;
										buffer += "var_function";

										// Çàâåðøåíèå öèêëà
										break;
									}

									// Ïðîâåðêà, ÷òî òåêóùàÿ ëåêñåìà - ýòî ãëàâíàÿ ôóíêöèÿ (LEX_MAINFUNC)
									if (lextable.table[k].lexema == LEX_MAINFUNC)
									{
										// Äîáàâëåíèå "var_main" â êîíòåêñò
										buffer += "var_main";

										// Çàâåðøåíèå öèêëà
										break;
									}
								}
							}
						}
					}

					// Äîáàâëåíèå òèïà è èìåíè â êîíòåêñò
					buffer += type;
					buffer += buff;

					// Î÷èñòêà âðåìåííûõ ïåðåìåííûõ
					type.clear();
					buff.clear();

					// Çàâåðøåíèå öèêëà
					break;
				}
			}
		}

		// Ïðèñâîåíèå ïîëó÷åííîãî êîíòåêñòà ïåðåìåííîé context
		context = buffer;

		// Âîçâðàò êîíòåêñòà
		return context;
	}


	// Ôóíêöèÿ fillFields ïðèíèìàåò çàïèñü idEntry è êîíòåêñò è çàïîëíÿåò ïîëÿ çàïèñè íà îñíîâå êîíòåêñòà
void fillFields(IT::Entry& idEntry, std::string context)
{
	// Ïðîâåðêà, íà÷èíàåòñÿ ëè êîíòåêñò ñ "function_string_"
	if (context.find("function_string_") == 0)
	{
		// Çàïîëíåíèå ïîëåé çàïèñè äëÿ ôóíêöèè ñ âîçâðàùàåìûì çíà÷åíèåì òèïà string
		idEntry.functionname = idEntry.id;
		idEntry.idtype = IT::IDTYPE::F;
		idEntry.iddatatype = IT::IDDATATYPE::STR;
	}
	// Ïðîâåðêà, íà÷èíàåòñÿ ëè êîíòåêñò ñ "function_integer_"
	else if (context.find("function_integer_") == 0)
	{
		// Çàïîëíåíèå ïîëåé çàïèñè äëÿ ôóíêöèè ñ âîçâðàùàåìûì çíà÷åíèåì òèïà integer
		idEntry.functionname = idEntry.id;
		idEntry.idtype = IT::IDTYPE::F;
		idEntry.iddatatype = IT::IDDATATYPE::INT;
	}
	// Ïðîâåðêà, íà÷èíàåòñÿ ëè êîíòåêñò ñ "parameter_function"
	else if (context.find("parameter_function") == 0)
	{
		// Çàïîëíåíèå ïîëåé çàïèñè äëÿ ïàðàìåòðà ôóíêöèè
		idEntry.idtype = IT::IDTYPE::P;
		// Ïðîâåðêà, ñîäåðæèò ëè êîíòåêñò "string"
		if (context.find("string") != std::string::npos)
		{
			idEntry.iddatatype = IT::IDDATATYPE::STR;
			idEntry.value.setString("");
		}
		// Ïðîâåðêà, ñîäåðæèò ëè êîíòåêñò "integer"
		else if (context.find("integer") != std::string::npos)
		{
			idEntry.iddatatype = IT::IDDATATYPE::INT;
			idEntry.value.setInteger(0);
		}
		// Èçâëå÷åíèå èìåíè ôóíêöèè èç êîíòåêñòà
		std::string buff;
		size_t lastUnderscorePos = context.rfind("_");
		if (lastUnderscorePos != std::string::npos)
		{
			buff = context.substr(lastUnderscorePos + 1);
		}
		idEntry.fun = buff;
	}
	// Ïðîâåðêà, íà÷èíàåòñÿ ëè êîíòåêñò ñ "var_main"
	else if (context.find("var_main") == 0)
	{
		// Çàïîëíåíèå ïîëåé çàïèñè äëÿ ïåðåìåííîé â ãëàâíîé ôóíêöèè
		idEntry.idtype = IT::IDTYPE::V;
		// Ïðîâåðêà, ñîäåðæèò ëè êîíòåêñò "string"
		if (context.find("string") != std::string::npos)
		{
			idEntry.iddatatype = IT::IDDATATYPE::STR;
			idEntry.value.setString("");
		}
		// Ïðîâåðêà, ñîäåðæèò ëè êîíòåêñò "integer"
		if (context.find("integer") != std::string::npos)
		{
			idEntry.iddatatype = IT::IDDATATYPE::INT;
			idEntry.value.setInteger(0);
		}
		// Óñòàíîâëåíèå èìåíè ôóíêöèè êàê "main"
		idEntry.fun = "main";
	}
	// Ïðîâåðêà, íà÷èíàåòñÿ ëè êîíòåêñò ñ "var_function"
	else if (context.find("var_function") == 0)
	{
		// Çàïîëíåíèå ïîëåé çàïèñè äëÿ ïåðåìåííîé â ïîëüçîâàòåëüñêîé ôóíêöèè
		idEntry.idtype = IT::IDTYPE::V;
		// Ïðîâåðêà, ñîäåðæèò ëè êîíòåêñò "string"
		if (context.find("string") != std::string::npos)
		{
			idEntry.iddatatype = IT::IDDATATYPE::STR;
			idEntry.value.setString("");
		}
		// Ïðîâåðêà, ñîäåðæèò ëè êîíòåêñò "integer"
		if (context.find("integer") != std::string::npos)
		{
			idEntry.iddatatype = IT::IDDATATYPE::INT;
			idEntry.value.setInteger(0);
		}
		// Èçâëå÷åíèå èìåíè ôóíêöèè èç êîíòåêñòà
		std::string buff;
		size_t lastUnderscorePos = context.rfind("_");
		if (lastUnderscorePos != std::string::npos)
		{
			buff = context.substr(lastUnderscorePos + 1);
		}
		idEntry.fun = buff;
	}
}


// Ôóíêöèÿ addIdentificator äîáàâëÿåò èäåíòèôèêàòîð â òàáëèöó ëåêñåì (lextable) è òàáëèöó èäåíòèôèêàòîðîâ (idtable)
void addIdentificator(LT::LexTable& lextable, IT::IdTable& idtable, std::string word, LT::Entry& lexEntry, int line)
{
	// Óñòàíàâëèâàåì ëåêñåìó êàê LEX_ID è óñòàíàâëèâàåì íîìåð ñòðîêè
	lexEntry.lexema = LEX_ID;
	lexEntry.sn = line;

	// Åñëè èäåíòèôèêàòîð ñëèøêîì äëèííûé, óêîðà÷èâàåì åãî äî ìàêñèìàëüíîé äëèíû ID_MAXSIZE
	if (word.length() > ID_MAXSIZE && (word != LIB_FUNCTION1 && word != LIB_FUNCTION2))
	{
		word = word.substr(0, ID_MAXSIZE);
	}

	// Óñòàíàâëèâàåì çíà÷åíèå êîììåíòàðèÿ â ëåêñåìå
	lexEntry.comm = word;

	// Äîáàâëÿåì ëåêñåìó â òàáëèöó ëåêñåì
	LT::Add(lextable, lexEntry);

	// Ïîëó÷àåì ðàçìåð òàáëèöû ëåêñåì ïîñëå äîáàâëåíèÿ
	int size = lextable.size - 1;

	// Ñîçäàåì çàïèñü äëÿ èäåíòèôèêàòîðà
	IT::Entry idEntry;

	// Ïîëó÷àåì êîíòåêñò äëÿ èäåíòèôèêàòîðà
	std::string context = getIdentifierContext(lextable, lextable.size);

	// Èùåì èäåíòèôèêàòîð â òàáëèöå èäåíòèôèêàòîðîâ
	int idIndex = IsId(idtable, word, idEntry.functionname, idEntry.fun);

	// Åñëè èäåíòèôèêàòîð óæå ñóùåñòâóåò
	if (idIndex != TI_NULLIDX)
	{
		idEntry.id = word;

		// Çàïîëíÿåì ïîëÿ çàïèñè èäåíòèôèêàòîðà íà îñíîâå êîíòåêñòà
		fillFields(idEntry, context);

		// Ïðîâåðÿåì òèï èäåíòèôèêàòîðà â òàáëèöå èäåíòèôèêàòîðîâ
		if (idtable.table[idIndex].idtype == 4)
		{
			// Ïðîâåðÿåì óñëîâèÿ äëÿ ïðèñâàèâàíèÿ çíà÷åíèÿ â çàâèñèìîñòè îò êîíòåêñòà
			bool condition1 = ((lextable.table[size - 1].lexema == LEX_LEFTHESIS && lextable.table[size - 2].lexema == LEX_ID)
				|| (lextable.table[size - 1].lexema == LEX_COMMA && lextable.table[size - 2].lexema == LEX_ID) || lextable.table[size - 1].lexema == LEX_SEMICOLON
				|| lextable.table[size - 1].lexema == LEX_PRINT || lextable.table[size - 1].lexema == LEX_RETURN);
			bool condition2 = (idtable.table[idIndex].iddatatype == idEntry.iddatatype &&
				idtable.table[idIndex].idtype == idEntry.idtype && idtable.table[idIndex].fun == idEntry.fun);

			// Åñëè íå âûïîëíÿþòñÿ îáà óñëîâèÿ, äîáàâëÿåì íîâóþ çàïèñü â òàáëèöó èäåíòèôèêàòîðîâ
			if (!condition1)
			{
				if (!condition2)
				{
					idEntry.idxfirstLE = size;
					lextable.table[size].idxTI = idtable.size;

					// Äîáàâëÿåì çàïèñü â òàáëèöó èäåíòèôèêàòîðîâ
					IT::Add(idtable, idEntry);
				}
			}
			// Èíà÷å óñòàíàâëèâàåì èíäåêñ èç ñóùåñòâóþùåé çàïèñè â òàáëèöå èäåíòèôèêàòîðîâ
			else
			{
				int bufIndex = idtable.table[idIndex].idxfirstLE;
				lextable.table[size].idxTI = lextable.table[bufIndex].idxTI;
			}
		}
		else if (idtable.table[idIndex].idtype == 3)
		{
			if (idtable.table[idIndex].fun != idEntry.fun)
			{
				idEntry.idxfirstLE = size;
				lextable.table[size].idxTI = idtable.size;

				// Äîáàâëÿåì çàïèñü â òàáëèöó èäåíòèôèêàòîðîâ
				IT::Add(idtable, idEntry);
			}
			else
			{
				int bufIndex = idtable.table[idIndex].idxfirstLE;
				lextable.table[size].idxTI = lextable.table[bufIndex].idxTI;
			}
		}
		else
		{
			int bufIndex = idtable.table[idIndex].idxfirstLE;
			lextable.table[size].idxTI = lextable.table[bufIndex].idxTI;
		}
	}
	// Åñëè èäåíòèôèêàòîð íå ñóùåñòâóåò â òàáëèöå èäåíòèôèêàòîðîâ
	else
	{
		idEntry.id = word;
		fillFields(idEntry, context);

		// Ïðîâåðÿåì òèï èäåíòèôèêàòîðà è äîáàâëÿåì çàïèñü â òàáëèöó èäåíòèôèêàòîðîâ
		if (idEntry.iddatatype == IT::IDDATATYPE::STR || idEntry.iddatatype == IT::IDDATATYPE::INT)
		{
			idEntry.idxfirstLE = size;
			lextable.table[size].idxTI = idtable.size;

			// Äîáàâëÿåì çàïèñü â òàáëèöó èäåíòèôèêàòîðîâ
			IT::Add(idtable, idEntry);
		}
	}
}



	void parse(In::IN in, LT::LexTable& lextable, IT::IdTable& idtable)
	{
		//// Ñîçäàåì ïåðåìåííûå äëÿ ëåêñåìû è èäåíòèôèêàòîðà
		LT::Entry lex;
		IT::Entry idn;
		// Ñòðîêà, ñîäåðæàùàÿ ðàçäåëèòåëè
		std::string separators = "();{}=*/+-|, ";
		// Áóôåð äëÿ õðàíåíèÿ òåêóùåé ñòðîêè èç âõîäíûõ äàííûõ
		std::string buff = "";
		// Ôëàã, óêàçûâàþùèé, íàõîäèòñÿ ëè ïàðñåð âíóòðè ñòðîêè (âíóòðè îäèíàðíûõ êàâû÷åê)
		bool insideString = false;
		// Ñ÷åò÷èê îòêðûâàþùèõñÿ êàâû÷åê
		int numbMarks = 0;
		// Ïåðåìåííûå äëÿ îòñëåæèâàíèÿ òåêóùåé ñòðîêè è ïîçèöèè â íåé
		int line = 0;
		int pos = 0;
		// Ñ÷åò÷èê äëÿ ëèòåðàëîâ
		int count = 0;
		// Ïðîõîäèì ïî ñòðîêàì âî âõîäíûõ äàííûõ
		for (line = 0; line < in.text.size(); line++)
		{
			// Ïîëó÷àåì òåêóùóþ ñòðîêó
			buff = in.text[line];
			// Ïåðåìåííàÿ äëÿ õðàíåíèÿ òåêóùåãî ñëîâà (ëåêñåìû)
			std::string word = "";
			// Ïðîõîäèì ïî ñèìâîëàì â òåêóùåé ñòðîêå
			for (pos = 0; pos < buff.size(); pos++)
			{
				// Åñëè íàõîäèìñÿ âíóòðè ñòðîêè
				if (insideString)
				{
					if (buff[pos] == '\'')
					{
						insideString = false;
						// Óáèðàåì êàâû÷êè èç ñòðîêè
						word += (unsigned char)buff[pos];
						word.erase(0, 1);
						word.erase(word.length() - 1, 1);
						// Ïðîâåðÿåì, ñóùåñòâóåò ëè òàêàÿ ñòðîêà â òàáëèöå èäåíòèôèêàòîðîâ
						int i = IT::findLexStr(idtable, word);
						// Çàïîëíÿåì ëåêñåìó è äîáàâëÿåì åå â òàáëèöó ëåêñåì
						lex.lexema = LEX_LITERAL;
						lex.sn = line;
						lex.comm = word;
						if (i != LT_TI_NULLIDX)
						{
							lex.idxTI = i;
						}

						else
						{
							idn.id = "L" + std::to_string(count);
							idn.iddatatype = IT::STR;
							idn.idtype = IT::L;
							idn.idxfirstLE = lextable.size;
							lex.idxTI = idtable.size;
							idn.value.setString(word);
							count++;
							IT::Add(idtable, idn);
						}

						LT::Add(lextable, lex);
					}
					else
					{
						word += (unsigned char)buff[pos];
					}
				}
				// Åñëè òåêóùèé ñèìâîë - îäèíàðíàÿ êàâû÷êà, âõîäèì âíóòðü ñòðîêè
				else if (buff[pos] == '\'')
				{
					insideString = true;
					word += (unsigned char)buff[pos];
				}
				// Åñëè òåêóùèé ñèìâîë - ðàçäåëèòåëü è ìû íå âíóòðè ñòðîêè
				else if (separators.find(buff[pos]) != std::string::npos && !insideString)
				{
					std::string buffer = "";
					buffer += buff[pos];
					// Îáðàáàòûâàåì ðàçíûå òèïû ðàçäåëèòåëåé
					switch (buff[pos])
					{
					case ' ':
					{
						break;
					}
					case '|':
					{
						break;
					}
					case '-':
					{
						if (check(buffer, typeMinus))
						{

							lex.lexema = LEX_MINUS;
							lex.sn = line;
							//lex.sn++;
							lex.idxTI = -1;
							LT::Add(lextable, lex);

						}
						else
						{
							throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
						}
						break;
					}
					case '+':
					{
						if (check(buffer, typePlus))
						{
							lex.lexema = LEX_PLUS;
							lex.sn = line;
							//lex.sn++;
							lex.idxTI = -1;
							LT::Add(lextable, lex);
						}
						else
						{

							throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
						}
						break;
					}

					case '*':
					{
						if (check(buffer, typeMulti))
						{
							lex.lexema = LEX_STAR;
							lex.sn = line;
							//lex.sn++;
							lex.idxTI = -1;
							LT::Add(lextable, lex);


						}
						else
						{
							throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
						}
						break;
					}

					case '/':
					{
						if (check(buffer, typeDel))
						{
							lex.lexema = LEX_DIRSLASH;
							lex.sn = line;
							lex.idxTI = -1;
							//lex.sn++;
							LT::Add(lextable, lex);

						}
						else
						{
							throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);

						}
						break;
					}

					case '(':
					{
						if (check(buffer, typeLeftThesis))
						{
							lex.lexema = LEX_LEFTHESIS;
							lex.sn = line;
							//lex.sn++;
							lex.idxTI = -1;
							LT::Add(lextable, lex);

						}
						else
						{
							throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
						}
						break;
					}

					case ')':
					{
						if (check(buffer, typeRightThesis))
						{
							lex.lexema = LEX_RIGHTHESIS;
							lex.sn = line;
							//lex.sn++;
							lex.idxTI = -1;
							LT::Add(lextable, lex);


						}
						else
						{
							throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
						}
						break;
					}

					case '{':
					{
						if (check(buffer, typeLeftBrace))
						{
							lex.lexema = LEX_LEFTBRACE;
							lex.sn = line;
							//lex.sn++;
							lex.idxTI = -1;
							LT::Add(lextable, lex);

						}
						else
						{
							throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);

						}
						break;
					}

					case '}':
					{
						if (check(buffer, typeRightBrace))
						{
							lex.lexema = LEX_RIGHTBRACE;
							lex.sn = line;
							//lex.sn++;
							lex.idxTI = -1;
							LT::Add(lextable, lex);


						}
						else
						{
							throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
						}
						break;
					}

					case ',':
					{
						if (check(buffer, typeComma))
						{
							lex.lexema = LEX_COMMA;
							lex.sn = line;
							lex.idxTI = -1;
							LT::Add(lextable, lex);


						}
						else
						{
							throw ERROR_THROW_IN(117, ++line, ++pos, buff, in.text);
						}
						break;
					}

					case ';':
					{
						if (check(buffer, typeSemicolon))
						{
							lex.lexema = LEX_SEMICOLON;
							lex.sn = line;
							//lex.sn++;
							lex.idxTI = -1;
							LT::Add(lextable, lex);


						}
						else
						{
							throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
						}
						break;
					}

					case '=':
					{
						if (check(buffer, typeEquals))
						{
							lex.lexema = LEX_RAV;
							lex.sn = line;
							//lex.sn++;
							lex.idxTI = -1;
							LT::Add(lextable, lex);

						}
						else
						{
							throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
						}
						break;
					}

					default:
					{// Åñëè íåèçâåñòíûé ðàçäåëèòåëü, ãåíåðèðóåì îøèáêó
						throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
						break;
					}

					}
					buffer.clear();
				}

				else
				{
					// Åñëè òåêóùèé ñèìâîë íå ðàçäåëèòåëü, äîáàâëÿåì åãî ê òåêóùåé ëåêñåìå (ñëîâó)
					word += (unsigned char)buff[pos];
					char k = buff[pos + 1];
					// Åñëè ñëåäóþùèé ñèìâîë - ðàçäåëèòåëü, ïðîâåðÿåì, êàêîé ýòî òèï ëåêñåìû
					if (separators.find(buff[pos + 1]) != std::string::npos)
					{
						switch ((unsigned char)word[0])
						{
						case 'i':
						{
							// Åñëè ýòî íà÷àëî ñëîâà, íà÷èíàþùåãîñÿ íà 'i'
							if (check(word, typeInteger))
							{
								// Åñëè ñëîâî ñîîòâåòñòâóåò òèïó "integer", äîáàâëÿåì ñîîòâåòñòâóþùóþ ëåêñåìó
								lex.lexema = LEX_INTEGER;
								lex.sn = line;
								lex.idxTI = -1;
								lex.comm = word;
								LT::Add(lextable, lex);

								word.clear();
							}

							else if (check(word, typeIdentificator))
							{
								// Åñëè ýòî èäåíòèôèêàòîð, îáðàáàòûâàåì åãî
								addIdentificator(lextable, idtable, word, lex, line);

								word.clear();
							}
							else
							{
								throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
							}

							break;
						}
						case 'd':
						{
							if (check(word, typeDeclare))
							{
								lex.lexema = LEX_DECLARE;
								lex.sn = line;
								lex.idxTI = -1;
								//lex.sn++;
								LT::Add(lextable, lex);

								word.clear();
							}
							else if (check(word, typeIdentificator))
							{
								addIdentificator(lextable, idtable, word, lex, line);

								word.clear();
							}
							else
							{
								throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
							}
							break;
						}

						case 's':
						{
							if (check(word, typeString))
							{
								lex.lexema = LEX_STRING;
								lex.sn = line;
								lex.idxTI = -1;
								lex.comm = word;
								LT::Add(lextable, lex);

								word.clear();
							}
							else if (check(word, typeIdentificator))
							{

								addIdentificator(lextable, idtable, word, lex, line);

								word.clear();
							}
							else
							{
								throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
							}
							break;
						}
						case 'f':
						{
							if (check(word, typeFunction))
							{
								lex.lexema = LEX_FUNCTION;
								lex.sn = line;
								lex.idxTI = -1;
								lex.comm = word;
								LT::Add(lextable, lex);

								word.clear();
							}
							else if (check(word, typeIdentificator))
							{

								addIdentificator(lextable, idtable, word, lex, line);

								word.clear();
							}
							else
							{
								throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
							}
							break;
						}

						case 'm':
						{

							if (check(word, typeMain))
							{
								lex.lexema = LEX_MAINFUNC;
								lex.sn = line;
								lex.idxTI = -1;
								lex.comm = word;
								LT::Add(lextable, lex);

								word.clear();
							}
							else if (check(word, typeIdentificator))
							{
								addIdentificator(lextable, idtable, word, lex, line);

								word.clear();
							}
							else
							{
								throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
							}
							break;
						}
						case 'r':
						{

							if (check(word, typeReturn))
							{
								lex.lexema = LEX_RETURN;
								lex.sn = line;
								lex.idxTI = -1;
								lex.comm = word;
								LT::Add(lextable, lex);

								word.clear();
							}
							else if (check(word, typeIdentificator))
							{
								addIdentificator(lextable, idtable, word, lex, line);

								word.clear();
							}
							else
							{
								throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
							}
							break;
						}

						case 'p':
						{

							if (check(word, typePrint))
							{
								lex.lexema = LEX_PRINT;
								lex.sn = line;
								lex.idxTI = -1;
								lex.comm = word;
								LT::Add(lextable, lex);

								word.clear();
							}
							else if (check(word, typeIdentificator))
							{

								addIdentificator(lextable, idtable, word, lex, line);

								word.clear();
							}
							else
							{
								throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
							}
							break;
						}

						default:
						{
							if (check(word, typeNumbLiteral))
							{
								int i = IT::findLexInteger(idtable, stoi(word));
								lex.lexema = LEX_LITERAL;
								lex.sn = line;
								lex.comm = word;
								if (i != LT_TI_NULLIDX)
								{
									lex.idxTI = i;
								}

								else
								{

									idn.id = "L" + std::to_string(count);
									idn.iddatatype = IT::INT;
									idn.idtype = IT::L;

									idn.idxfirstLE = lextable.size;

									lex.idxTI = idtable.size;

									idn.value.setInteger(stoi(word));
									count++;
									IT::Add(idtable, idn);
								}
								LT::Add(lextable, lex);

								word.clear();
							}
							else if (check(word, typeIdentificator))
							{

								addIdentificator(lextable, idtable, word, lex, line);
								word.clear();
							}
							else
							{
								throw ERROR_THROW_IN(105, ++line, ++pos, buff, in.text);
							}

							break;
						}
						}
					}

				}
			}

		}
		for (int i = 0; i < lextable.size; i++)
		{
			(std::cout) << i << '\t' << "SN: " << lextable.table[i].sn << ", "
				<< "IdxTI: " << lextable.table[i].idxTI << ", "
				<< "Lexema: " << lextable.table[i].lexema << std::endl;
		}


		std::cout << "\n";

		std::cout << "\n\nÒàáëèöà èäåíòèôèêàòîðîâ:\n";
		std::cout << std::left << std::setw(20) << "Index" << std::setw(20) << "Index FirstLE" << std::setw(20) << "Identifier" << std::setw(20) << "Function" << std::setw(10) << "Type" << std::setw(30) << "Value" << std::setw(25) << "Function Name" << "\n";
		std::cout << std::setfill(' ');

		for (int i = 0; i < idtable.size; i++) {
			std::string type;
			switch (idtable.table[i].iddatatype) {
			case IT::INT:
				type = "INT";
				break;
			case IT::STR:
				type = "STR";
				break;
			default:
				type = "Unknown";
			}

			std::string idtype;
			switch (idtable.table[i].idtype) {
			case IT::V:
				idtype = "Variable";
				break;
			case IT::F:
				idtype = "Function";
				break;
			case IT::P:
				idtype = "Parameter";
				break;
			case IT::L:
				idtype = "Local Variable";
				break;
			default:
				idtype = "Unknown";
			}

			std::cout << std::left << std::setw(20) << "Index"
				<< std::setw(20) << "IdxfirstLE"
				<< std::setw(15) << "ID"
				<< std::setw(15) << "Fun"
				<< std::setw(10) << "Type";

			if (idtable.table[i].idtype != IT::F) {
				if (idtable.table[i].iddatatype == IT::INT) {
					std::cout << std::setw(15) << "IntValue";
				}
				else if (idtable.table[i].iddatatype == IT::STR) {
					std::cout << std::setw(15) << "StrValue";
				}
			}
			else {
				std::cout << std::setw(15) << "-";
			}

			std::cout << std::setw(30) << "Function Name" << "\n";

			std::cout << std::left << std::setw(20) << i
				<< std::setw(20) << idtable.table[i].idxfirstLE
				<< std::setw(15) << idtable.table[i].id
				<< std::setw(15) << idtable.table[i].fun
				<< std::setw(10) << type;

			if (idtable.table[i].idtype != IT::F) {
				if (idtable.table[i].iddatatype == IT::INT) {
					std::cout << std::setw(15) << idtable.table[i].value.vint;
				}
				else if (idtable.table[i].iddatatype == IT::STR) {
					std::cout << std::setw(15) << idtable.table[i].value.vstr;
				}
			}
			else {
				std::cout << std::setw(15) << "-";
			}

			std::cout << std::setw(30) << idtable.table[i].functionname << "\n";
		}

		std::cout << '\n';



	}
}

